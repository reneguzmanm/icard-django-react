{"ast":null,"code":"var _jsxFileName = \"C:\\\\Cursos\\\\Full\\\\icard\\\\icard_react\\\\icard\\\\src\\\\context\\\\AuthContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, createContext } from \"react\";\nimport { setToken, getToken } from \"../api/token\";\nimport { useUser } from \"../hooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({\n  auth: undefined,\n  login: () => null,\n  logout: () => null\n});\nexport function AuthProvider(props) {\n  _s();\n\n  const {\n    children\n  } = props;\n  const [auth, setAuth] = useState(undefined);\n  const {\n    getMe\n  } = useUser();\n  useEffect(() => {\n    (async () => {\n      const token = getToken();\n\n      if (token) {\n        const me = await getMe(token);\n        setAuth({\n          token,\n          me\n        });\n        console.log(me);\n      } else {\n        setAuth(null);\n      }\n    })();\n  }, []);\n\n  const login = async token => {\n    setToken(token);\n    const me = await getMe(token);\n    setAuth({\n      token,\n      me\n    });\n  };\n\n  const valueContext = {\n    auth,\n    login,\n    logout: () => console.log(\"Cerrando sesión\")\n  };\n  if (auth == undefined) return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: valueContext,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AuthProvider, \"RGM/rL0uw8XeFcXO/ZdEMDGR26E=\", false, function () {\n  return [useUser];\n});\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["C:/Cursos/Full/icard/icard_react/icard/src/context/AuthContext.js"],"names":["React","useState","useEffect","createContext","setToken","getToken","useUser","AuthContext","auth","undefined","login","logout","AuthProvider","props","children","setAuth","getMe","token","me","console","log","valueContext"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,aAApC,QAAwD,OAAxD;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,cAAnC;AACA,SAASC,OAAT,QAAyB,UAAzB;;AAEA,OAAO,MAAMC,WAAW,gBAAGJ,aAAa,CAAC;AACrCK,EAAAA,IAAI,EAAEC,SAD+B;AAErCC,EAAAA,KAAK,EAAE,MAAM,IAFwB;AAGrCC,EAAAA,MAAM,EAAE,MAAM;AAHuB,CAAD,CAAjC;AAMP,OAAO,SAASC,YAAT,CAAsBC,KAAtB,EAA4B;AAAA;;AAC/B,QAAM;AAAEC,IAAAA;AAAF,MAAeD,KAArB;AACA,QAAM,CAACL,IAAD,EAAOO,OAAP,IAAkBd,QAAQ,CAACQ,SAAD,CAAhC;AACA,QAAM;AAAEO,IAAAA;AAAF,MAAYV,OAAO,EAAzB;AAEAJ,EAAAA,SAAS,CAAC,MAAM;AACd,KAAC,YAAW;AACV,YAAMe,KAAK,GAAGZ,QAAQ,EAAtB;;AACA,UAAGY,KAAH,EAAS;AACL,cAAMC,EAAE,GAAG,MAAMF,KAAK,CAACC,KAAD,CAAtB;AACAF,QAAAA,OAAO,CAAC;AAACE,UAAAA,KAAD;AAAQC,UAAAA;AAAR,SAAD,CAAP;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYF,EAAZ;AACH,OAJD,MAIO;AACHH,QAAAA,OAAO,CAAC,IAAD,CAAP;AACH;AACF,KATD;AAUD,GAXQ,EAWN,EAXM,CAAT;;AAaA,QAAML,KAAK,GAAG,MAAOO,KAAP,IAAiB;AAC3Bb,IAAAA,QAAQ,CAACa,KAAD,CAAR;AACA,UAAMC,EAAE,GAAG,MAAMF,KAAK,CAACC,KAAD,CAAtB;AACAF,IAAAA,OAAO,CAAC;AAAEE,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAD,CAAP;AACH,GAJD;;AAMA,QAAMG,YAAY,GAAG;AACjBb,IAAAA,IADiB;AAEjBE,IAAAA,KAFiB;AAGjBC,IAAAA,MAAM,EAAE,MAAMQ,OAAO,CAACC,GAAR,CAAY,iBAAZ;AAHG,GAArB;AAMA,MAAGZ,IAAI,IAAIC,SAAX,EAEA,oBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEY,YAA7B;AAAA,cACKP;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH;;GArCeF,Y;UAGMN,O;;;KAHNM,Y","sourcesContent":["import React, {useState, useEffect, createContext} from \"react\";\r\nimport { setToken, getToken } from \"../api/token\";\r\nimport { useUser }  from \"../hooks\";\r\n\r\nexport const AuthContext = createContext({\r\n    auth: undefined,\r\n    login: () => null,\r\n    logout: () => null,\r\n});\r\n\r\nexport function AuthProvider(props){\r\n    const { children } = props;\r\n    const [auth, setAuth] = useState(undefined);\r\n    const { getMe } = useUser();\r\n\r\n    useEffect(() => {\r\n      (async() => {\r\n        const token = getToken();\r\n        if(token){\r\n            const me = await getMe(token);\r\n            setAuth({token, me});\r\n            console.log(me);\r\n        } else {\r\n            setAuth(null);\r\n        }\r\n      })();\r\n    }, []);\r\n    \r\n    const login = async (token) => {\r\n        setToken(token);\r\n        const me = await getMe(token);\r\n        setAuth({ token, me });\r\n    };\r\n\r\n    const valueContext = {\r\n        auth,\r\n        login,\r\n        logout: () => console.log(\"Cerrando sesión\"),\r\n    }\r\n\r\n    if(auth == undefined)\r\n\r\n    return(\r\n        <AuthContext.Provider value={valueContext}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}