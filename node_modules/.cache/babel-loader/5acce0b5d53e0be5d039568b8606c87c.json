{"ast":null,"code":"var _jsxFileName = \"C:\\\\Cursos\\\\Full\\\\icard\\\\icard_react\\\\icard\\\\src\\\\components\\\\Admin\\\\Product\\\\AddEditProductForm\\\\AddEditProductForm.js\",\n    _s = $RefreshSig$();\n\nimport { map, multiply } from 'lodash';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Form, Image, Button, Dropdown, Checkbox } from 'semantic-ui-react';\nimport { useCategory, useProduct } from \"../../../../hooks\";\nimport { useDropzone } from 'react-dropzone';\nimport \"./AddEditProductForm.scss\";\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function AddEditProductForm(props) {\n  _s();\n\n  const [categoriesFormat, setCategoriesFormat] = useState([]);\n  const [previewImage, setPreviewImage] = useState(null);\n  const {\n    categories,\n    getCategories\n  } = useCategory();\n  const {\n    addProduct\n  } = useProduct();\n  useEffect(() => getCategories(), []);\n  useEffect(() => {\n    setCategoriesFormat(formatDropdownData(categories));\n  }, [categories]);\n  const formik = useFormik({\n    initialValues: initialValues(),\n    validationSchema: Yup.object(newSchema()),\n    validateOnChange: false,\n    onSubmit: async formValue => {\n      await addProduct(formValue);\n    }\n  });\n  const onDrop = useCallback(async acceptedFile => {\n    const file = acceptedFile[0];\n    await formik.setFieldValue(\"image\", file);\n    setPreviewImage(URL.createObjectURL(file));\n  }, []);\n  const {\n    getRootProps,\n    getInputProps\n  } = useDropzone({\n    accept: \"image/jpeg, image/png\",\n    noKeyboard: true,\n    multiple: false,\n    onDrop\n  });\n  return /*#__PURE__*/_jsxDEV(Form, {\n    className: \"add-edit-product-form\",\n    onSubmit: formik.handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n      name: \"title\",\n      placeholder: \"Nombre del producto\",\n      value: formik.values.title,\n      onChange: formik.handleChange,\n      error: formik.errors.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n      type: \"number\",\n      name: \"price\",\n      placeholder: \"Precio\",\n      value: formik.values.price\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n      placeholder: \"Categor\\xEDa\",\n      fluid: true,\n      selection: true,\n      search: true,\n      options: categoriesFormat,\n      value: formik.values.category,\n      error: formik.errors.category,\n      onChange: (_, data) => formik.setFieldValue(\"category\", data.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-edit-product-form__active\",\n      children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n        toggle: true,\n        checked: formik.values.active,\n        onChange: (_, data) => formik.setFieldValue('active', data.checked)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), \"Producto activo\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      fluid: true,\n      ...getRootProps(),\n      color: formik.errors.image && \"red\",\n      children: previewImage ? \"Cambiar imagen\" : \"Subir imagen\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Image, {\n      src: previewImage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"submit\",\n      primary: true,\n      fluid: true,\n      content: \"Crear\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddEditProductForm, \"UFqMnOuRZbxjBp6rxuwh1v4vOJE=\", false, function () {\n  return [useCategory, useProduct, useFormik, useDropzone];\n});\n\n_c = AddEditProductForm;\n\nfunction formatDropdownData(data) {\n  return map(data, item => ({\n    key: item.id,\n    text: item.title,\n    value: item.id\n  }));\n}\n\nfunction initialValues() {\n  return {\n    title: \"\",\n    price: \"\",\n    category: \"\",\n    active: false,\n    image: \"\"\n  };\n}\n\nfunction newSchema() {\n  return {\n    title: Yup.string().required(true),\n    price: Yup.number().required(true),\n    category: Yup.number().required(true),\n    active: Yup.boolean().required(true),\n    image: Yup.string().required(true)\n  };\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"AddEditProductForm\");","map":{"version":3,"sources":["C:/Cursos/Full/icard/icard_react/icard/src/components/Admin/Product/AddEditProductForm/AddEditProductForm.js"],"names":["map","multiply","React","useState","useEffect","useCallback","Form","Image","Button","Dropdown","Checkbox","useCategory","useProduct","useDropzone","useFormik","Yup","AddEditProductForm","props","categoriesFormat","setCategoriesFormat","previewImage","setPreviewImage","categories","getCategories","addProduct","formatDropdownData","formik","initialValues","validationSchema","object","newSchema","validateOnChange","onSubmit","formValue","onDrop","acceptedFile","file","setFieldValue","URL","createObjectURL","getRootProps","getInputProps","accept","noKeyboard","multiple","handleSubmit","values","title","handleChange","errors","price","category","_","data","value","active","checked","image","item","key","id","text","string","required","number","boolean"],"mappings":"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","sourcesContent":["import { map, multiply } from 'lodash';\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { Form, Image, Button, Dropdown, Checkbox } from 'semantic-ui-react';\r\nimport { useCategory, useProduct } from \"../../../../hooks\";\r\nimport { useDropzone } from 'react-dropzone';\r\nimport \"./AddEditProductForm.scss\";\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\n\r\nexport function AddEditProductForm(props) {\r\n  \r\n  const [categoriesFormat, setCategoriesFormat] = useState([]);\r\n  const [previewImage, setPreviewImage] = useState(null)\r\n  const { categories, getCategories } = useCategory();\r\n  const { addProduct } = useProduct();\r\n\r\n  useEffect(( )=>getCategories(),[]);\r\n  \r\n  useEffect(() => {\r\n    setCategoriesFormat(formatDropdownData(categories));\r\n  }, [categories]);\r\n\r\n  const formik = useFormik({\r\n    initialValues: initialValues(),\r\n    validationSchema: Yup.object(newSchema()),\r\n    validateOnChange: false,\r\n    onSubmit: async (formValue) => {\r\n      await addProduct(formValue);\r\n    }\r\n  });\r\n\r\n  const onDrop = useCallback(async(acceptedFile)=>{\r\n    const file = acceptedFile[0];\r\n    await formik.setFieldValue(\"image\", file);\r\n    setPreviewImage(URL.createObjectURL(file));\r\n  },[])\r\n\r\n  \r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    multiple: false,\r\n    onDrop,\r\n  })\r\n\r\n  return (\r\n    <Form className='add-edit-product-form' onSubmit={formik.handleSubmit}>\r\n      <Form.Input \r\n        name=\"title\" \r\n        placeholder=\"Nombre del producto\" \r\n        value={formik.values.title}\r\n        onChange={formik.handleChange}\r\n        error={formik.errors.title}\r\n      />\r\n      <Form.Input \r\n        type='number' \r\n        name=\"price\" \r\n        placeholder=\"Precio\" \r\n        value={formik.values.price} \r\n      />\r\n      <Dropdown \r\n        placeholder='CategorÃ­a' \r\n        fluid \r\n        selection \r\n        search \r\n        options={categoriesFormat}\r\n        value={formik.values.category}\r\n        error={formik.errors.category}\r\n        onChange={(_,data)=> formik.setFieldValue(\"category\", data.value)}\r\n      />\r\n\r\n      <div className='add-edit-product-form__active'>\r\n        <Checkbox \r\n          toggle \r\n          checked={formik.values.active} \r\n          onChange={(_,data) => formik.setFieldValue('active', data.checked)}\r\n        />\r\n        Producto activo\r\n      </div>\r\n      <Button type='button' fluid {...getRootProps()} color={formik.errors.image && \"red\"}>\r\n        {previewImage ? \"Cambiar imagen\" : \"Subir imagen\"}\r\n      </Button>\r\n      <input {...getInputProps()} />\r\n      <Image src={previewImage} />\r\n      <Button type='submit' primary fluid content=\"Crear\" />\r\n    </Form>\r\n  );\r\n}\r\nfunction formatDropdownData(data){\r\n  return map(data, (item) => ({\r\n    key: item.id,\r\n    text: item.title,\r\n    value: item.id,\r\n  }));\r\n}\r\n\r\nfunction initialValues(){\r\n  return{\r\n    title:\"\",\r\n    price:\"\",\r\n    category:\"\",\r\n    active: false,\r\n    image:\"\",\r\n  };\r\n}\r\n\r\nfunction newSchema(){\r\n  return{\r\n    title: Yup.string().required(true),\r\n    price: Yup.number().required(true),\r\n    category: Yup.number().required(true),\r\n    active: Yup.boolean().required(true),\r\n    image: Yup.string().required(true),\r\n  };\r\n}"]},"metadata":{},"sourceType":"module"}