{"ast":null,"code":"var _jsxFileName = \"C:\\\\Cursos\\\\Full\\\\icard\\\\icard_react\\\\icard\\\\src\\\\components\\\\Admin\\\\Category\\\\AddEditCategoryForm\\\\AddEditCategoryForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback } from 'react';\nimport \"./AddEditCategoryForm.scss\";\nimport { Form, Image, Button } from \"semantic-ui-react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { useFormik } from 'formik';\nimport * as Yup from \"yup\";\nimport { useCategory } from \"../../../../hooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function AddEditCategoryForm(props) {\n  _s();\n\n  const {\n    onClose,\n    onRefetch,\n    category\n  } = props;\n  const [previewImage, setPreviewImage] = useState((category === null || category === void 0 ? void 0 : category.image) || null);\n  const {\n    addCategory\n  } = useCategory();\n  console.log(category);\n  const formik = useFormik({\n    initialValues: initialValues(category),\n    validationSchema: Yup.object(newSchema()),\n    validateOnChange: false,\n    onSubmit: async formValue => {\n      try {\n        await addCategory(formValue);\n        onRefetch();\n        onClose();\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  });\n  const onDrop = useCallback(async acceptedFile => {\n    const file = acceptedFile[0];\n    await formik.setFieldValue('image', file);\n    setPreviewImage(URL.createObjectURL(file));\n  }, []);\n  const {\n    getRootProps,\n    getInputProps\n  } = useDropzone({\n    accept: 'image/jpeg, image/png',\n    noKeyboard: true,\n    multiple: false,\n    onDrop: onDrop\n  });\n  return /*#__PURE__*/_jsxDEV(Form, {\n    className: \"add-edit-category-form\",\n    onSubmit: formik.handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n      name: \"title\",\n      placeholder: \"Nombre de la categor\\xEDa\",\n      value: formik.values.title,\n      onChange: formik.handleChange,\n      error: formik.errors.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      fluid: true,\n      color: formik.errors.image && \"red\",\n      ...getRootProps(),\n      children: \"Subir imagen\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Image, {\n      src: previewImage,\n      fluid: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"submit\",\n      primary: true,\n      fluid: true,\n      content: category ? \"Actualizar\" : \"Crear\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddEditCategoryForm, \"ad0Ygiypi46tyAs0odCRW9mNx4Y=\", false, function () {\n  return [useCategory, useFormik, useDropzone];\n});\n\n_c = AddEditCategoryForm;\n\nfunction initialValues(data) {\n  return {\n    title: (data === null || data === void 0 ? void 0 : data.title) || \"\",\n    image: \"\"\n  };\n}\n\nfunction newSchema() {\n  return {\n    title: Yup.string().required(true),\n    image: Yup.string().required(true)\n  };\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"AddEditCategoryForm\");","map":{"version":3,"sources":["C:/Cursos/Full/icard/icard_react/icard/src/components/Admin/Category/AddEditCategoryForm/AddEditCategoryForm.js"],"names":["React","useState","useCallback","Form","Image","Button","useDropzone","useFormik","Yup","useCategory","AddEditCategoryForm","props","onClose","onRefetch","category","previewImage","setPreviewImage","image","addCategory","console","log","formik","initialValues","validationSchema","object","newSchema","validateOnChange","onSubmit","formValue","error","onDrop","acceptedFile","file","setFieldValue","URL","createObjectURL","getRootProps","getInputProps","accept","noKeyboard","multiple","handleSubmit","values","title","handleChange","errors","data","string","required"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,QAA6C,OAA7C;AACA,OAAO,4BAAP;AACA,SAAQC,IAAR,EAAcC,KAAd,EAAqBC,MAArB,QAAkC,mBAAlC;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,SAAT,QAA0B,QAA1B;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,WAAT,QAA4B,mBAA5B;;AAEA,OAAO,SAASC,mBAAT,CAA6BC,KAA7B,EAAoC;AAAA;;AACzC,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,SAAX;AAAsBC,IAAAA;AAAtB,MAAmCH,KAAzC;AACA,QAAM,CAACI,YAAD,EAAeC,eAAf,IAAkCf,QAAQ,CAAC,CAAAa,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEG,KAAV,KAAmB,IAApB,CAAhD;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAkBT,WAAW,EAAnC;AAEAU,EAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ;AAEA,QAAMO,MAAM,GAAGd,SAAS,CAAC;AACvBe,IAAAA,aAAa,EAAEA,aAAa,CAACR,QAAD,CADL;AAEvBS,IAAAA,gBAAgB,EAAEf,GAAG,CAACgB,MAAJ,CAAWC,SAAS,EAApB,CAFK;AAGvBC,IAAAA,gBAAgB,EAAE,KAHK;AAIvBC,IAAAA,QAAQ,EAAE,MAAOC,SAAP,IAAoB;AAC5B,UAAI;AACF,cAAMV,WAAW,CAACU,SAAD,CAAjB;AACAf,QAAAA,SAAS;AACTD,QAAAA,OAAO;AACR,OAJD,CAIE,OAAOiB,KAAP,EAAc;AACdV,QAAAA,OAAO,CAACU,KAAR,CAAcA,KAAd;AACD;AAEF;AAbsB,GAAD,CAAxB;AAeA,QAAMC,MAAM,GAAG5B,WAAW,CAAC,MAAO6B,YAAP,IAAwB;AACjD,UAAMC,IAAI,GAAGD,YAAY,CAAC,CAAD,CAAzB;AACA,UAAMV,MAAM,CAACY,aAAP,CAAqB,OAArB,EAA8BD,IAA9B,CAAN;AACAhB,IAAAA,eAAe,CAACkB,GAAG,CAACC,eAAJ,CAAoBH,IAApB,CAAD,CAAf;AACD,GAJyB,EAIvB,EAJuB,CAA1B;AAMA,QAAM;AAAEI,IAAAA,YAAF;AAAgBC,IAAAA;AAAhB,MAAiC/B,WAAW,CAAC;AACjDgC,IAAAA,MAAM,EAAE,uBADyC;AAEjDC,IAAAA,UAAU,EAAE,IAFqC;AAGjDC,IAAAA,QAAQ,EAAE,KAHuC;AAIjDV,IAAAA,MAAM,EAAEA;AAJyC,GAAD,CAAlD;AAOA,sBACE,QAAC,IAAD;AAAM,IAAA,SAAS,EAAC,wBAAhB;AAAyC,IAAA,QAAQ,EAAET,MAAM,CAACoB,YAA1D;AAAA,4BACE,QAAC,IAAD,CAAM,KAAN;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,WAAW,EAAC,2BAFd;AAGE,MAAA,KAAK,EAAEpB,MAAM,CAACqB,MAAP,CAAcC,KAHvB;AAIE,MAAA,QAAQ,EAAEtB,MAAM,CAACuB,YAJnB;AAKE,MAAA,KAAK,EAAEvB,MAAM,CAACwB,MAAP,CAAcF;AALvB;AAAA;AAAA;AAAA;AAAA,YADF,eAQE,QAAC,MAAD;AACE,MAAA,IAAI,EAAC,QADP;AACgB,MAAA,KAAK,MADrB;AACsB,MAAA,KAAK,EAAEtB,MAAM,CAACwB,MAAP,CAAc5B,KAAd,IAAuB,KADpD;AAAA,SAC+DmB,YAAY,EAD3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YARF,eAaI,sBAAWC;AAAX;AAAA;AAAA;AAAA;AAAA,YAbJ,eAcI,QAAC,KAAD;AAAO,MAAA,GAAG,EAAEtB,YAAZ;AAA0B,MAAA,KAAK;AAA/B;AAAA;AAAA;AAAA;AAAA,YAdJ,eAeI,QAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,OAAO,MAA7B;AAA8B,MAAA,KAAK,MAAnC;AAAoC,MAAA,OAAO,EAAED,QAAQ,GAAE,YAAF,GAAiB;AAAtE;AAAA;AAAA;AAAA;AAAA,YAfJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAmBD;;GAtDeJ,mB;UAGUD,W,EAITF,S,EAqBwBD,W;;;KA5BzBI,mB;;AAwDhB,SAASY,aAAT,CAAuBwB,IAAvB,EAA4B;AAC1B,SAAM;AACJH,IAAAA,KAAK,EAAE,CAAAG,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEH,KAAN,KAAe,EADlB;AAEJ1B,IAAAA,KAAK,EAAE;AAFH,GAAN;AAID;;AAED,SAASQ,SAAT,GAAoB;AAClB,SAAM;AACJkB,IAAAA,KAAK,EAAEnC,GAAG,CAACuC,MAAJ,GAAaC,QAAb,CAAsB,IAAtB,CADH;AAEJ/B,IAAAA,KAAK,EAAET,GAAG,CAACuC,MAAJ,GAAaC,QAAb,CAAsB,IAAtB;AAFH,GAAN;AAID","sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport \"./AddEditCategoryForm.scss\"\r\nimport {Form, Image, Button} from \"semantic-ui-react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from \"yup\";\r\nimport { useCategory } from \"../../../../hooks\";\r\n\r\nexport function AddEditCategoryForm(props) {\r\n  const { onClose, onRefetch, category } = props;\r\n  const [previewImage, setPreviewImage] = useState(category?.image || null);\r\n  const { addCategory } = useCategory();\r\n\r\n  console.log(category);\r\n\r\n  const formik = useFormik({\r\n    initialValues: initialValues(category),\r\n    validationSchema: Yup.object(newSchema()),\r\n    validateOnChange: false,\r\n    onSubmit: async (formValue) =>{\r\n      try {\r\n        await addCategory(formValue);\r\n        onRefetch();\r\n        onClose();\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n      \r\n    }\r\n  })\r\n  const onDrop = useCallback(async (acceptedFile) => {\r\n    const file = acceptedFile[0];\r\n    await formik.setFieldValue('image', file);\r\n    setPreviewImage(URL.createObjectURL(file));\r\n  }, [])\r\n  \r\n  const { getRootProps, getInputProps} = useDropzone({\r\n    accept: 'image/jpeg, image/png',\r\n    noKeyboard: true,\r\n    multiple: false,\r\n    onDrop: onDrop,\r\n  });\r\n\r\n  return (\r\n    <Form className='add-edit-category-form' onSubmit={formik.handleSubmit}>\r\n      <Form.Input \r\n        name=\"title\" \r\n        placeholder=\"Nombre de la categorÃ­a\" \r\n        value={formik.values.title} \r\n        onChange={formik.handleChange}\r\n        error={formik.errors.title}  \r\n      />\r\n      <Button\r\n        type='button' fluid color={formik.errors.image && \"red\"} {...getRootProps()} >\r\n          Subir imagen\r\n          {}\r\n        </Button>\r\n        <input {...getInputProps} />\r\n        <Image src={previewImage} fluid />\r\n        <Button type='submit' primary fluid content={category? \"Actualizar\" : \"Crear\"} />\r\n    </Form>\r\n  );\r\n}\r\n\r\nfunction initialValues(data){\r\n  return{\r\n    title: data?.title || \"\",\r\n    image: \"\",\r\n  };\r\n}\r\n\r\nfunction newSchema(){\r\n  return{\r\n    title: Yup.string().required(true),\r\n    image: Yup.string().required(true),\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}