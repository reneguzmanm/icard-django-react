{"ast":null,"code":"var _jsxFileName = \"C:\\\\Cursos\\\\Full\\\\icard\\\\icard_react\\\\icard\\\\src\\\\components\\\\Admin\\\\Category\\\\AddEditCategoryForm\\\\AddEditCategoryForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback } from 'react';\nimport \"./AddEditCategoryForm.scss\";\nimport { Form, Image, Button } from \"semantic-ui-react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { useFormik } from 'formik';\nimport * as Yup from \"yup\";\nimport { useCategory } from \"../../../../hooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function AddEditCategoryForm(props) {\n  _s();\n\n  const {\n    onClose,\n    onRefetch,\n    category\n  } = props;\n  const [previewImage, setPreviewImage] = useState((category === null || category === void 0 ? void 0 : category.image) || null);\n  const {\n    addCategory,\n    updateCategory\n  } = useCategory();\n  const formik = useFormik({\n    initialValues: initialValues(category),\n    validationSchema: Yup.object(category ? updateSchema() : newSchema()),\n    validateOnChange: false,\n    onSubmit: async formValue => {\n      try {\n        if (category) updateCategory(category.id, formValue);else await addCategory(formValue);\n        onRefetch();\n        onClose();\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  });\n  const onDrop = useCallback(async acceptedFile => {\n    const file = acceptedFile[0];\n    await formik.setFieldValue('image', file);\n    setPreviewImage(URL.createObjectURL(file));\n  }, []);\n  const {\n    getRootProps,\n    getInputProps\n  } = useDropzone({\n    accept: 'image/jpeg, image/png',\n    noKeyboard: true,\n    multiple: false,\n    onDrop: onDrop\n  });\n  return /*#__PURE__*/_jsxDEV(Form, {\n    className: \"add-edit-category-form\",\n    onSubmit: formik.handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n      name: \"title\",\n      placeholder: \"Nombre de la categor\\xEDa\",\n      value: formik.values.title,\n      onChange: formik.handleChange,\n      error: formik.errors.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"button\",\n      fluid: true,\n      color: formik.errors.image && \"red\",\n      ...getRootProps(),\n      children: previewImage ? \"Cambiar imagen\" : \"Subir imagen\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Image, {\n      src: previewImage,\n      fluid: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"submit\",\n      primary: true,\n      fluid: true,\n      content: category ? \"Actualizar\" : \"Crear\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddEditCategoryForm, \"mxd11nVwtzNn2jJW65HNU2/CbOg=\", false, function () {\n  return [useCategory, useFormik, useDropzone];\n});\n\n_c = AddEditCategoryForm;\n\nfunction initialValues(data) {\n  return {\n    title: (data === null || data === void 0 ? void 0 : data.title) || \"\",\n    image: \"\"\n  };\n}\n\nfunction newSchema() {\n  return {\n    title: Yup.string().required(true),\n    image: Yup.string().required(true)\n  };\n}\n\nfunction updateSchema() {\n  return {\n    title: Yup.string().required(true),\n    image: Yup.string()\n  };\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"AddEditCategoryForm\");","map":{"version":3,"sources":["C:/Cursos/Full/icard/icard_react/icard/src/components/Admin/Category/AddEditCategoryForm/AddEditCategoryForm.js"],"names":["React","useState","useCallback","Form","Image","Button","useDropzone","useFormik","Yup","useCategory","AddEditCategoryForm","props","onClose","onRefetch","category","previewImage","setPreviewImage","image","addCategory","updateCategory","formik","initialValues","validationSchema","object","updateSchema","newSchema","validateOnChange","onSubmit","formValue","id","error","console","onDrop","acceptedFile","file","setFieldValue","URL","createObjectURL","getRootProps","getInputProps","accept","noKeyboard","multiple","handleSubmit","values","title","handleChange","errors","data","string","required"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport \"./AddEditCategoryForm.scss\"\r\nimport {Form, Image, Button} from \"semantic-ui-react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from \"yup\";\r\nimport { useCategory } from \"../../../../hooks\";\r\n\r\nexport function AddEditCategoryForm(props) {\r\n  const { onClose, onRefetch, category } = props;\r\n  const [previewImage, setPreviewImage] = useState(category?.image || null);\r\n  const { addCategory, updateCategory } = useCategory();\r\n\r\n  const formik = useFormik({\r\n    initialValues: initialValues(category),\r\n    validationSchema: Yup.object(category ? updateSchema() : newSchema()),\r\n    validateOnChange: false,\r\n    onSubmit: async (formValue) =>{\r\n      try {\r\n        if(category) updateCategory(category.id, formValue);\r\n        else await addCategory(formValue);\r\n        \r\n        onRefetch();\r\n        onClose();\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n      \r\n    }\r\n  })\r\n  const onDrop = useCallback(async (acceptedFile) => {\r\n    const file = acceptedFile[0];\r\n    await formik.setFieldValue('image', file);\r\n    setPreviewImage(URL.createObjectURL(file));\r\n  }, [])\r\n  \r\n  const { getRootProps, getInputProps} = useDropzone({\r\n    accept: 'image/jpeg, image/png',\r\n    noKeyboard: true,\r\n    multiple: false,\r\n    onDrop: onDrop,\r\n  });\r\n\r\n  return (\r\n    <Form className='add-edit-category-form' onSubmit={formik.handleSubmit}>\r\n      <Form.Input \r\n        name=\"title\" \r\n        placeholder=\"Nombre de la categorÃ­a\" \r\n        value={formik.values.title} \r\n        onChange={formik.handleChange}\r\n        error={formik.errors.title}  \r\n      />\r\n      <Button\r\n        type='button' fluid color={formik.errors.image && \"red\"} {...getRootProps()} >\r\n          {previewImage ? \"Cambiar imagen\" : \"Subir imagen\"}\r\n        </Button>\r\n        <input {...getInputProps} />\r\n        <Image src={previewImage} fluid />\r\n        <Button type='submit' primary fluid content={category? \"Actualizar\" : \"Crear\"} />\r\n    </Form>\r\n  );\r\n}\r\n\r\nfunction initialValues(data){\r\n  return{\r\n    title: data?.title || \"\",\r\n    image: \"\",\r\n  };\r\n}\r\n\r\nfunction newSchema(){\r\n  return{\r\n    title: Yup.string().required(true),\r\n    image: Yup.string().required(true),\r\n  }\r\n}\r\n\r\nfunction updateSchema(){\r\n  return{\r\n    title: Yup.string().required(true),\r\n    image: Yup.string(),\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}